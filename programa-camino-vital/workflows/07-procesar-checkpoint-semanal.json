{
  "updatedAt": "2026-01-22T19:51:39.921Z",
  "createdAt": "2026-01-19T20:03:07.656Z",
  "id": "v8HjVPF07oBYmLBX",
  "name": "Camino Vital - 07 Procesar Checkpoint Semanal",
  "description": null,
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "GET",
        "path": "checkpoint-semanal",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-checkpoint",
      "name": "Webhook Checkpoint Semanal",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [240, 300],
      "webhookId": "checkpoint-semanal"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT key, value FROM config WHERE key IN ('WEBHOOK_URL');",
        "options": {}
      },
      "id": "obtener-config",
      "name": "Obtener Config",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [360, 300],
      "credentials": {
        "postgres": {
          "id": "nLcUOvLreXurFbBs",
          "name": "PostgreSQL Camino Vital Local"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Combinar query params con config\nconst webhookData = $('Webhook Checkpoint Semanal').first().json;\nconst configItems = $('Obtener Config').all();\n\n// Construir objeto config\nconst config = {};\nconfigItems.forEach(item => {\n  config[item.json.key] = item.json.value;\n});\n\nreturn {\n  json: {\n    query: webhookData.query,\n    config: config\n  }\n};"
      },
      "id": "combinar-config",
      "name": "Combinar Config",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [480, 300]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=-- Analizar la semana del usuario para obtener recomendaciones\nSELECT * FROM analizar_semana_para_checkpoint({{ $json.query.user_id }});",
        "options": {}
      },
      "id": "analizar-semana",
      "name": "Analizar Semana",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [600, 300],
      "credentials": {
        "postgres": {
          "id": "nLcUOvLreXurFbBs",
          "name": "PostgreSQL Camino Vital Local"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=-- Procesar checkpoint con la elecci√≥n del usuario\nSELECT * FROM procesar_checkpoint_interactivo(\n  {{ $node['Analizar Semana'].json.out_user_id }},\n  {{ $node['Combinar Config'].json.query.sesiones || 3 }},\n  '{{ $node['Analizar Semana'].json.accion_nivel }}',\n  {{ $node['Analizar Semana'].json.accion_intensidad }},\n  '{{ $node['Analizar Semana'].json.adherencia_nivel }}',\n  '{{ $node['Analizar Semana'].json.feedback_mayoritario }}',\n  '{{ $node['Analizar Semana'].json.explicacion_corta }}'\n);",
        "options": {}
      },
      "id": "procesar-checkpoint",
      "name": "Procesar Checkpoint",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [800, 300],
      "credentials": {
        "postgres": {
          "id": "nLcUOvLreXurFbBs",
          "name": "PostgreSQL Camino Vital Local"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// A√±adir config al resultado del checkpoint\nconst checkpointData = $json;\nconst configData = $('Combinar Config').first().json.config;\n\nreturn {\n  json: {\n    ...checkpointData,\n    config: configData\n  }\n};"
      },
      "id": "add-config",
      "name": "A√±adir Config",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [920, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose"
          },
          "conditions": [
            {
              "id": "ya-procesado",
              "leftValue": "={{ $json.estado_checkpoint }}",
              "rightValue": "ya_procesado",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "if-ya-procesado",
      "name": "IF: ¬øCheckpoint ya procesado?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [1040, 300]
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html><html><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Ya procesado</title></head><body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #232323; color: #E8E8E8; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0;\"><div style=\"background: #1C1C1C; padding: 40px; border-radius: 18px; text-align: center; max-width: 400px;\"><div style=\"font-size: 48px; margin-bottom: 20px;\">‚úÖ</div><h1 style=\"color: #62B882; margin: 0 0 15px 0;\">¬°Ya procesado!</h1><p style=\"color: #B5B5B5; margin: 0;\">Tu checkpoint de esta semana ya fue registrado. Revisa tu email para ver tu primera sesi√≥n de la nueva semana.</p></div></body></html>",
        "options": {
          "responseCode": 200,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/html; charset=utf-8"
              }
            ]
          }
        }
      },
      "id": "responder-ya-procesado",
      "name": "Responder Ya Procesado",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [1260, 200]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose"
          },
          "conditions": [
            {
              "id": "programa-completado",
              "leftValue": "={{ $json.semana_actual }}",
              "rightValue": 13,
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "if-programa-completado",
      "name": "IF: ¬øPrograma completado (>12 sem)?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [1260, 400]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE programa_users\nSET estado = 'completado', updated_at = NOW()\nWHERE id = {{ $json.id }}\nRETURNING *;",
        "options": {}
      },
      "id": "marcar-programa-completado",
      "name": "Marcar Programa Completado",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [1480, 350],
      "credentials": {
        "postgres": {
          "id": "nLcUOvLreXurFbBs",
          "name": "PostgreSQL Camino Vital Local"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT html_template FROM email_templates WHERE nombre = 'programa_completado' AND version = 1;",
        "options": {}
      },
      "id": "obtener-template-fin",
      "name": "Obtener Template Fin Programa",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [1700, 350],
      "credentials": {
        "postgres": {
          "id": "nLcUOvLreXurFbBs",
          "name": "PostgreSQL Camino Vital Local"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Preparar email de programa completado\nconst template = $json.html_template;\nconst usuario = $node['Marcar Programa Completado'].json;\nconst config = $node['A√±adir Config'].json.config;\nconst webhookUrl = config.WEBHOOK_URL || 'http://localhost:5678';\n\nconst emailHTML = template\n  .replace(/\\{\\{nombre\\}\\}/g, usuario.nombre || 'Usuario')\n  .replace(/\\{\\{nivel_actual\\}\\}/g, usuario.nivel_actual || '')\n  .replace(/\\{\\{intensidad\\}\\}/g, usuario.intensidad_nivel || '');\n\nreturn {\n  json: {\n    user_id: usuario.id,\n    user_email: usuario.email,\n    user_nombre: usuario.nombre,\n    email_html: emailHTML,\n    asunto: 'üèÜ ¬°Felicidades! Has completado Camino Vital',\n    webhook_url: webhookUrl\n  }\n};"
      },
      "id": "preparar-email-fin",
      "name": "Preparar Email Fin Programa",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1920, 350]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $json.webhook_url }}/webhook/util/enviar-email",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify($json) }}",
        "options": {
          "timeout": 30000
        }
      },
      "id": "enviar-email-fin-util",
      "name": "Enviar Email Fin (UTIL)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2140, 350]
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html><html><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>¬°Programa Completado!</title></head><body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #232323; color: #E8E8E8; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0;\"><div style=\"background: #1C1C1C; padding: 40px; border-radius: 18px; text-align: center; max-width: 400px;\"><div style=\"font-size: 64px; margin-bottom: 20px;\">üèÜ</div><h1 style=\"color: #DFCA61; margin: 0 0 15px 0;\">¬°Felicidades!</h1><p style=\"color: #B5B5B5; font-size: 18px; margin: 0 0 20px 0;\">Has completado el programa Camino Vital</p><p style=\"color: #62B882; margin: 0;\">Revisa tu email para m√°s informaci√≥n.</p></div></body></html>",
        "options": {
          "responseCode": 200,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/html; charset=utf-8"
              }
            ]
          }
        }
      },
      "id": "responder-programa-completado",
      "name": "Responder Programa Completado",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [2360, 350]
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html><html><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>¬°Confirmado!</title></head><body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #232323; color: #E8E8E8; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0;\"><div style=\"background: #1C1C1C; padding: 40px; border-radius: 18px; text-align: center; max-width: 450px;\"><div style=\"font-size: 64px; margin-bottom: 20px;\">üéâ</div><h1 style=\"color: #62B882; margin: 0 0 15px 0;\">¬°Perfecto, {{ $json.nombre }}!</h1><p style=\"color: #B5B5B5; font-size: 16px; margin: 0 0 25px 0;\">Tu configuraci√≥n para la <strong style=\"color: #DFCA61;\">Semana {{ $json.semana_actual }}</strong></p><div style=\"background: rgba(98,184,130,0.1); border-radius: 12px; padding: 20px; margin: 20px 0;\"><p style=\"margin: 5px 0; color: #B5B5B5;\">üìä Nivel: <strong style=\"color: #E8E8E8;\">{{ $json.nivel_actual.toUpperCase() }}</strong></p><p style=\"margin: 5px 0; color: #B5B5B5;\">‚ö° Intensidad: <strong style=\"color: #E8E8E8;\">{{ $json.intensidad_nivel }}%</strong></p><p style=\"margin: 5px 0; color: #B5B5B5;\">üìÖ Sesiones/semana: <strong style=\"color: #E8E8E8;\">{{ $json.sesiones_objetivo_semana }}</strong></p></div><p style=\"color: #62B882; margin: 20px 0 0 0;\">üì¨ En breve recibir√°s tu primera sesi√≥n por email</p></div></body></html>",
        "options": {
          "responseCode": 200,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/html; charset=utf-8"
              }
            ]
          }
        }
      },
      "id": "responder-confirmacion",
      "name": "Responder Confirmaci√≥n Inmediata",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [1380, 500]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $node['A√±adir Config'].json.config.WEBHOOK_URL || 'http://localhost:5678' }}/webhook/generar-sesion-ia",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ user_id: $node['A√±adir Config'].json.id }) }}",
        "options": {
          "timeout": 120000
        }
      },
      "id": "llamar-generador-ia",
      "name": "Llamar Generador Sesi√≥n IA",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1600, 500]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=SELECT \n  s.*,\n  u.email as user_email,\n  u.nombre as user_nombre,\n  u.nivel_actual,\n  u.intensidad_nivel,\n  u.volumen_extra,\n  u.auth_token\nFROM programa_sesiones s\nJOIN programa_users u ON s.user_id = u.id\nWHERE s.user_id = {{ $node['A√±adir Config'].json.id }}\n  AND s.semana = {{ $node['A√±adir Config'].json.semana_actual }}\n  AND s.numero_sesion = 1\nORDER BY s.created_at DESC\nLIMIT 1;",
        "options": {}
      },
      "id": "obtener-sesion-generada",
      "name": "Obtener Sesi√≥n Generada",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [1820, 500],
      "credentials": {
        "postgres": {
          "id": "nLcUOvLreXurFbBs",
          "name": "PostgreSQL Camino Vital Local"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=SELECT \n  t.html_template,\n  COALESCE(bs.html_template, '') as banner_subir,\n  COALESCE(bb.html_template, '') as banner_bajar\nFROM email_templates t\nLEFT JOIN email_templates bs ON bs.nombre = 'componente_banner_ajuste_subir' AND bs.version = 1\nLEFT JOIN email_templates bb ON bb.nombre = 'componente_banner_ajuste_bajar' AND bb.version = 1\nWHERE t.nombre = 'email_checkpoint_nueva_semana' AND t.version = 1;",
        "options": {}
      },
      "id": "obtener-template-nueva-semana",
      "name": "Obtener Template Nueva Semana",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [2040, 500],
      "credentials": {
        "postgres": {
          "id": "nLcUOvLreXurFbBs",
          "name": "PostgreSQL Camino Vital Local"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Preparar email usando templates de BD\nconst templates = $json;\nconst sesion = $node['Obtener Sesi√≥n Generada'].json;\nconst checkpointData = $node['A√±adir Config'].json;\nconst config = checkpointData.config;\n\nconsole.log('üìß Preparando email checkpoint con sesi√≥n nueva semana');\n\nconst webhookUrl = config.WEBHOOK_URL || 'http://localhost:5678';\nconst sesionUrl = `${webhookUrl}/webhook/view-session/sesion/${sesion.id}?token=${sesion.auth_token}`;\n\n// Calcular total ejercicios y enfoque\nlet totalEjercicios = 'N/A';\nlet enfoqueTexto = 'Mixto';\n\nif (sesion.enfoque === 'fuerza' && sesion.calentamiento && sesion.trabajo_principal) {\n  const calentamiento = typeof sesion.calentamiento === 'string' ? JSON.parse(sesion.calentamiento) : sesion.calentamiento;\n  const trabajoPrincipal = typeof sesion.trabajo_principal === 'string' ? JSON.parse(sesion.trabajo_principal) : sesion.trabajo_principal;\n  totalEjercicios = `${(calentamiento?.length || 0) + (trabajoPrincipal?.length || 0)} ejercicios personalizados`;\n  enfoqueTexto = 'Fuerza Funcional';\n} else if (sesion.enfoque === 'cardio') {\n  totalEjercicios = 'Actividad cardiovascular guiada';\n  enfoqueTexto = 'Cardio y Resistencia';\n}\n\n// Determinar banner de ajuste usando accion_tomada (nuevo campo)\nlet bannerAjuste = '';\nconst accion = checkpointData.accion_tomada;\nconsole.log('üéØ Acci√≥n tomada:', accion);\n\nif (accion && accion !== 'mantener') {\n  let bannerTemplate = '';\n\n  if (accion === 'subir' || accion === 'subir_mucho') {\n    bannerTemplate = templates.banner_subir;\n  } else if (accion === 'bajar' || accion === 'bajar_mucho') {\n    bannerTemplate = templates.banner_bajar;\n  }\n\n  if (bannerTemplate) {\n    bannerAjuste = bannerTemplate\n      .replace(/\\{\\{ajuste_razon\\}\\}/g, checkpointData.ajuste_razon || '')\n      .replace(/\\{\\{ajuste_nivel\\}\\}/g, (checkpointData.nivel_actual || '').toUpperCase())\n      .replace(/\\{\\{ajuste_intensidad\\}\\}/g, checkpointData.ajuste_intensidad || '');\n  }\n}\n\n// Reemplazar variables en el template principal\nconst emailHTML = templates.html_template\n  .replace(/\\{\\{semana\\}\\}/g, sesion.semana || '')\n  .replace(/\\{\\{nombre\\}\\}/g, sesion.user_nombre || '')\n  .replace(/\\{\\{semana_anterior\\}\\}/g, (checkpointData.semana_actual - 1) || '')\n  .replace(/\\{\\{banner_ajuste\\}\\}/g, bannerAjuste)\n  .replace(/\\{\\{titulo\\}\\}/g, sesion.titulo || '')\n  .replace(/\\{\\{descripcion\\}\\}/g, sesion.descripcion || 'Sesi√≥n personalizada para tu nivel')\n  .replace(/\\{\\{duracion\\}\\}/g, sesion.duracion_estimada || '30')\n  .replace(/\\{\\{enfoque\\}\\}/g, enfoqueTexto)\n  .replace(/\\{\\{contenido\\}\\}/g, totalEjercicios)\n  .replace(/\\{\\{sesion_url\\}\\}/g, sesionUrl)\n  .replace(/\\{\\{sesiones_objetivo\\}\\}/g, checkpointData.sesiones_objetivo_semana || '');\n\nreturn {\n  json: {\n    user_id: sesion.user_id,\n    user_email: sesion.user_email,\n    user_nombre: sesion.user_nombre,\n    sesion_id: sesion.id,\n    email_html: emailHTML,\n    asunto: `üéØ Semana ${sesion.semana} - Sesi√≥n 1: ${sesion.titulo}`,\n    webhook_url: webhookUrl\n  }\n};\n"
      },
      "id": "preparar-email-sesion",
      "name": "Preparar Email Sesi√≥n",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2260, 500]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $json.webhook_url }}/webhook/util/enviar-email",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify($json) }}",
        "options": {
          "timeout": 30000
        }
      },
      "id": "enviar-email-sesion-util",
      "name": "Enviar Email Sesi√≥n (UTIL)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2480, 500]
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html><html><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Error</title></head><body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #232323; color: #E8E8E8; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0;\"><div style=\"background: #1C1C1C; padding: 40px; border-radius: 18px; text-align: center; max-width: 400px;\"><div style=\"font-size: 48px; margin-bottom: 20px;\">‚ùå</div><h1 style=\"color: #EF5350; margin: 0 0 15px 0;\">Error</h1><p style=\"color: #B5B5B5; margin: 0;\">Hubo un problema procesando tu checkpoint. Por favor, intenta de nuevo o contacta soporte.</p></div></body></html>",
        "options": {
          "responseCode": 500,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/html; charset=utf-8"
              }
            ]
          }
        }
      },
      "id": "responder-error",
      "name": "Responder Error",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [800, 500]
    }
  ],
  "connections": {
    "Webhook Checkpoint Semanal": {
      "main": [
        [
          {
            "node": "Obtener Config",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtener Config": {
      "main": [
        [
          {
            "node": "Combinar Config",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combinar Config": {
      "main": [
        [
          {
            "node": "Analizar Semana",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analizar Semana": {
      "main": [
        [
          {
            "node": "Procesar Checkpoint",
            "type": "main",
            "index": 0
          }
        ]
      ],
      "error": [
        [
          {
            "node": "Responder Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Procesar Checkpoint": {
      "main": [
        [
          {
            "node": "A√±adir Config",
            "type": "main",
            "index": 0
          }
        ]
      ],
      "error": [
        [
          {
            "node": "Responder Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "A√±adir Config": {
      "main": [
        [
          {
            "node": "IF: ¬øCheckpoint ya procesado?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF: ¬øCheckpoint ya procesado?": {
      "main": [
        [
          {
            "node": "Responder Ya Procesado",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF: ¬øPrograma completado (>12 sem)?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF: ¬øPrograma completado (>12 sem)?": {
      "main": [
        [
          {
            "node": "Marcar Programa Completado",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Responder Confirmaci√≥n Inmediata",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Responder Confirmaci√≥n Inmediata": {
      "main": [
        [
          {
            "node": "Llamar Generador Sesi√≥n IA",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Marcar Programa Completado": {
      "main": [
        [
          {
            "node": "Obtener Template Fin Programa",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtener Template Fin Programa": {
      "main": [
        [
          {
            "node": "Preparar Email Fin Programa",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Email Fin Programa": {
      "main": [
        [
          {
            "node": "Enviar Email Fin (UTIL)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enviar Email Fin (UTIL)": {
      "main": [
        [
          {
            "node": "Responder Programa Completado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Llamar Generador Sesi√≥n IA": {
      "main": [
        [
          {
            "node": "Obtener Sesi√≥n Generada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtener Sesi√≥n Generada": {
      "main": [
        [
          {
            "node": "Obtener Template Nueva Semana",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtener Template Nueva Semana": {
      "main": [
        [
          {
            "node": "Preparar Email Sesi√≥n",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Email Sesi√≥n": {
      "main": [
        [
          {
            "node": "Enviar Email Sesi√≥n (UTIL)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enviar Email Sesi√≥n (UTIL)": {
      "main": []
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "v6-config-table",
  "versionCounter": 44,
  "triggerCount": 1,
  "tags": [],
  "shared": [
    {
      "updatedAt": "2026-01-19T20:03:07.656Z",
      "createdAt": "2026-01-19T20:03:07.656Z",
      "role": "workflow:owner",
      "workflowId": "xpthbEm1BVvFGemC",
      "projectId": "UdrpUrR3Q6pngStF",
      "project": {
        "updatedAt": "2025-12-30T11:32:25.894Z",
        "createdAt": "2025-12-01T10:04:05.303Z",
        "id": "UdrpUrR3Q6pngStF",
        "name": "Albert Villanueva Carreras <albertvc10@gmail.com>",
        "type": "personal",
        "icon": null,
        "description": null
      }
    }
  ]
}
